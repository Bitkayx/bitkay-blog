---
import BlogPost from "./BlogPost.astro";
import { createLocalDate } from "../utils/dateUtils";

interface Props {
  posts: Array<{
    url: string;
    frontmatter: {
      title: string;
      description?: string;
      pubDate: string;
      image?: {
        url: string;
        alt?: string;
      };
      tags?: string[];
    };
  }>;
  limit?: number;
}

const { posts, limit = 3 } = Astro.props;

const sortedPosts = posts
  .sort(
    (a, b) =>
      createLocalDate(b.data.pubDate).getTime() -
      createLocalDate(a.data.pubDate).getTime(),
  )
  .slice(0, limit);
---

<section class="w-full">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {
      sortedPosts.map((post: any) => (
        <BlogPost
          url={`/posts/${post.id}`}
          title={post.data.title}
          description={post.data.description}
          pubDate={post.data.pubDate}
          author={post.data.author}
          image={post.data.image}
          tags={post.data.tags}
        />
      ))
    }
  </div>
</section>
